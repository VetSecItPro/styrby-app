# ============================================================================
# STYRBY ENVIRONMENT VARIABLES
# ============================================================================
# Copy this file to .env.local and fill in your values
# NEVER commit .env.local to git - only this .env.example file
# ============================================================================


# ============================================================================
# SUPABASE
# ============================================================================
# Project: Styrby
# Dashboard: https://supabase.com/dashboard/project/YOUR_PROJECT_REF
#
# Get these from: Supabase Dashboard > Project Settings > API
# ============================================================================

SUPABASE_URL=https://your-project-ref.supabase.co
SUPABASE_ANON_KEY=your-anon-key-here

# Service Role Key - KEEP SECRET, server-side only
# Get from: Supabase Dashboard > Project Settings > API > service_role (reveal)
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key-here

# For Expo mobile app (EXPO_PUBLIC_ prefix exposes to client)
EXPO_PUBLIC_SUPABASE_URL=https://your-project-ref.supabase.co
EXPO_PUBLIC_SUPABASE_ANON_KEY=your-anon-key-here

# For Next.js web app (NEXT_PUBLIC_ prefix exposes to client)
NEXT_PUBLIC_SUPABASE_URL=https://your-project-ref.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key-here

# Public app URL â€” used for metadataBase in layout.tsx and checkout redirect URLs.
# In production, set to your canonical domain (e.g., https://styrbyapp.com).
# In preview/staging, Vercel sets VERCEL_URL automatically but this override takes priority.
NEXT_PUBLIC_APP_URL=http://localhost:3000


# ============================================================================
# POLAR (Payment & Subscriptions)
# ============================================================================
# For subscription billing (Pro $19/month, Power $39/month)
# Polar.sh is a merchant of record - handles taxes, billing, compliance
# Fee: 4% + $0.40 per transaction
#
# Dashboard: https://polar.sh/dashboard
# API Docs: https://docs.polar.sh
# SDK: @polar-sh/sdk
# ============================================================================

# Access Token - server-side only, NEVER expose to client
# Get from: Polar Dashboard > Settings > Developers > Personal Access Tokens
# Create token with scopes: products:read, orders:read, subscriptions:read, webhooks:read
POLAR_ACCESS_TOKEN=polar_at_xxx

# Organization ID - your Polar organization/account ID
# Get from: Polar Dashboard > Settings > Organization > Organization ID
# Or from the URL: https://polar.sh/dashboard/[org-slug]/settings
POLAR_ORGANIZATION_ID=org_xxx

# Webhook Secret - for verifying Polar webhook payloads
# Get from: Polar Dashboard > Settings > Webhooks > Create Webhook
# Endpoint URL: https://styrbyapp.com/api/webhooks/polar (or your Vercel URL)
# Events to listen for: subscription.created, subscription.updated,
#                       subscription.canceled, order.created
POLAR_WEBHOOK_SECRET=whsec_xxx

# Product IDs - create products in Polar Dashboard first
# Dashboard > Products > Create Product
# Each paid tier needs TWO products: one for monthly, one for annual billing.
# The webhook handler and checkout flow both use these to map purchases to tiers.
#
# Pro tier: $19/month or $190/year
POLAR_PRO_MONTHLY_PRODUCT_ID=prod_xxx
POLAR_PRO_ANNUAL_PRODUCT_ID=prod_xxx

# Power tier: $49/month or $490/year
POLAR_POWER_MONTHLY_PRODUCT_ID=prod_xxx
POLAR_POWER_ANNUAL_PRODUCT_ID=prod_xxx

# Environment: 'sandbox' for testing, 'production' for live
# Sandbox API: https://sandbox-api.polar.sh
# Production API: https://api.polar.sh
POLAR_ENVIRONMENT=sandbox


# ============================================================================
# RESEND (Transactional Email)
# ============================================================================
# Used by packages/styrby-web/src/lib/resend.ts to send transactional emails:
# welcome emails, subscription confirmations, payment failures, budget alerts,
# and weekly summary digests via React Email templates.
#
# Get from: https://resend.com/api-keys
# Create an API key with "Sending access" permission for your verified domain.
# Sender address: hello@styrbyapp.com (must match verified domain in Resend)
# ============================================================================

RESEND_API_KEY=re_xxx


# ============================================================================
# SENTRY (Error Tracking)
# ============================================================================
# For crash reporting and performance monitoring
#
# Get DSN from: https://sentry.io > Project Settings > Client Keys (DSN)
# Create a new project for each platform (styrby-cli, styrby-mobile, styrby-web)
# ============================================================================

# CLI error tracking
SENTRY_DSN_CLI=https://xxx@xxx.ingest.sentry.io/xxx

# Mobile app error tracking
SENTRY_DSN_MOBILE=https://xxx@xxx.ingest.sentry.io/xxx

# Web dashboard error tracking
SENTRY_DSN_WEB=https://xxx@xxx.ingest.sentry.io/xxx

# Auth token for source map uploads (optional, for better stack traces)
# Get from: https://sentry.io > Settings > Auth Tokens
SENTRY_AUTH_TOKEN=


# ============================================================================
# POSTHOG (Product Analytics)
# ============================================================================
# For user behavior tracking, feature flags, funnels
#
# Get from: https://app.posthog.com > Project Settings > Project API Key
# ============================================================================

NEXT_PUBLIC_POSTHOG_KEY=phc_xxx
NEXT_PUBLIC_POSTHOG_HOST=https://app.posthog.com

# For mobile app
EXPO_PUBLIC_POSTHOG_KEY=phc_xxx
EXPO_PUBLIC_POSTHOG_HOST=https://app.posthog.com


# ============================================================================
# EXPO (Mobile App Build & OTA Updates)
# ============================================================================
# For EAS Build and OTA updates
#
# Get from: https://expo.dev > Account Settings > Access Tokens
# ============================================================================

EXPO_TOKEN=your-expo-token-here


# ============================================================================
# VERCEL (Web Hosting)
# ============================================================================
# Mostly managed via Vercel Dashboard, but useful for local dev
#
# Project ID from: Vercel Dashboard > Project > Settings > General
# ============================================================================

VERCEL_PROJECT_ID=prj_xxx


# ============================================================================
# CLI RUNTIME (Set automatically by CLI during auth)
# ============================================================================
# These are populated when user runs `styrby auth`
# Do not set manually
# ============================================================================

# STYRBY_USER_ID=
# STYRBY_ACCESS_TOKEN=
# STYRBY_MACHINE_ID=
